---
title: "overall_analysis"
author: "Amanda Stein"
format: html
---

```{r}
library(tidyverse)
library(ggplot2)
```

```{r}
data <- read.csv("refined_somerville.csv")
Somerville_data <- data |>
  mutate(across(where(is.character), as.factor)) |>
  mutate(across(c("Education.Quality.Satisfaction.label", "Housing.Condition.Satisfaction.label", "Somerville.Satisfaction.label"), ~factor(., levels = c("Very Unsatisfied", "Unsatisfied", "Neutral", "Satisfied", "Very Satisfied"))))

```


need to reformat x axis labels
```{r}
library(reshape)
corData <- cor(Somerville_data [, c("Education.Quality.Satisfaction.num", "Housing.Condition.Satisfaction.num", "Feel.Part.Community.num", "Somerville.Satisfaction.num", "Happiness.num")])
corDataMelted <- melt(corData)

ggplot(corDataMelted, aes(x = X1, y = X2, fill = value)) +
  scale_fill_gradient2(low = "blue", high = "red", mid = "white", midpoint = 0, limit = c(-1, 1), name = "Correlation") +
  geom_tile() + xlab("") + ylab("") +
  labs(title = ,
       fill = "Correlation") + theme_minimal()
```

```{r}
cor.test(Somerville_data$Somerville.Satisfaction.num, Somerville_data$Happiness.num, method = "pearson")
```

```{r}
ggplot(Somerville_data, aes(x = Happiness.num, fill = Race.Ethnicity)) +
  geom_bar() +
  facet_wrap("Education.Quality.Satisfaction.label") +
  theme_minimal()
```




